function generateGUID(){do{var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}while(-1<GUIDList.indexOf(e));return e}function toFunc(e){if("function"==typeof e)return e;if("string"==typeof e){if(null!=window[e]&&"function"==typeof window[e])return window[e];try{return new Function(e)}catch(e){}}return function(){return e}}function Obj(){this._parent=null,this._handlers=[],this._onceHandlers=[],this._elements=$(),this.guid=generateGUID(),this.on=function(e,t){"function"==typeof e&&void 0===t&&(t=e,e="all"),e=e.toLowerCase().split(" ");for(var n=0;n<e.length;n++)this._handlers.push({event:e[n],handler:t});return this},this.once=function(e,t){"function"==typeof e&&void 0===t&&(t=e,e="all"),e=e.toLowerCase().split(" ");for(var n=0;n<e.length;n++)this._onceHandlers.push({event:e[n],handler:t});return this},this.off=function(e,t){if(void 0===t&&"function"==typeof e)for(var t=e,n=0;n<this._handlers.length;n++)this._handlers[n].handler==t&&this._handlers.splice(n--,1);else if(void 0===t&&"string"==typeof e){e=e.toLowerCase().split(" ");for(n=0;n<this._handlers.length;n++)-1<e.indexOf(this._handlers[n].event)&&this._handlers.splice(n--,1)}else{e=e.toLowerCase().split(" ");for(n=0;n<this._handlers.length;n++)-1<e.indexOf(this._handlers[n].event)&&this._handlers[n].handler==t&&this._handlers.splice(n--,1)}return this},this.offOnce=function(e,t){if(void 0===t&&"function"==typeof e)for(var t=e,n=0;n<this._onceHandlers.length;n++)this._onceHandlers[n].handler==t&&this._onceHandlers.splice(n--,1);else if(void 0===t&&"string"==typeof e){e=e.toLowerCase().split(" ");for(n=0;n<this._onceHandlers.length;n++)-1<e.indexOf(this._onceHandlers[n].event)&&this._onceHandlers.splice(n--,1)}else{e=e.toLowerCase().split(" ");for(n=0;n<this._onceHandlers.length;n++)-1<e.indexOf(this._onceHandlers[n].event)&&this._onceHandlers[n].handler==t&&this._onceHandlers.splice(n--,1)}return this},this.trigger=function(e,t){e=e.toLowerCase().split(" ");for(var n=0;n<this._handlers.length;n++)(-1<e.indexOf(this._handlers[n].event)||"all"==this._handlers[n].event)&&toFunc(this._handlers[n].handler).call(this,this._handlers[n].event,t);for(n=0;n<this._onceHandlers.length;n++)(-1<e.indexOf(this._onceHandlers[n].event)||"all"==this._handlers[n].event)&&(toFunc(this._onceHandlers[n].handler).call(this,this._onceHandlers[n].event,t),this._onceHandlers.splice(n--,1));return this},this.renderer=function(){return $("<div class='Obj'></div>")},this.refresher=function(e){return this.renderer.apply(this)},this.destroyer=function(e){},this.render=function(e,s){var r=this,i=(void 0===e&&(e="body"),s=void 0===s?"replace":s.toLowerCase(),[].slice.call(arguments,2)),h=this;return $(e).each(function(e,t){t=$(t);var n=$(r.renderer.apply(r,i));n.attr("guid",r.guid),r._elements=r._elements.add(n),"append"==s?t.append(n):"prepend"==s?t.prepend(n):"after"==s?t.after(n):"before"==s?t.before(n):"return"==s?h=n:"none"!=s&&(t.after(n),t.remove())}),this.trigger("render"),h},this.refresh=function(){for(var e=$(),t=0;t<this._elements.length;t++)var n=this._elements.eq(t),s=this.refresher.call(this,n),e=s?(s.attr("guid",this.guid),this._elements=this._elements.not(n),n.after(s),n.remove(),e.add(s)):e.add(n);return this._elements=e,this},this.destroy=function(){var n=this;return this._elements.each(function(e,t){t=$(t);n.destroyer.call(n,t)}),this._elements.remove(),this._elements=$(),delete Objs[this.guid],this},Objs[this.guid]=this}var GUIDList=[],Objs={};
var JApp=window.JApp||{};$=$||jQuery,JApp.pricing=(e=>{var t={},n={},o="eapps",s="",i={};return e.url={getPlatformsInfoHost:function(){return"https://platforms-info.jelastic.com"},getCloudHost:function(){return"https://www.virtuozzo.com/application-platform-partners"},getUserDefHosterURL:function(){return e.url.getPlatformsInfoHost()+"/api/user/getdefhoster"},getHosters:function(){return e.url.getCloudHost()+"/wp-json/jelastic/hosters/"},getPrices:function(){return e.url.getCloudHost()+"/wp-json/jelastic/pricing/"},getCurrecies:function(){return e.url.getCloudHost()+"/wp-json/jelastic/pricing/currency/"}},e.getPricing=function(){return t},e.getCurrecies=function(){return n},e.isLoadedPricing=function(){return 0!==Object.keys(t).length},e.isLoadedCurrencies=function(){return 0!==Object.keys(n).length},e.loadCurrencies=function(r){$.ajax({type:"GET",url:JApp.pricing.url.getCurrecies(),dataType:"json",async:!0,success:function(e){e.response&&((n=e.response).sort(function(e,r){e=e.code.toLowerCase(),r=r.code.toLowerCase();return e<r?-1:r<e?1:0}),$.each(n,function(e){"USD"!==this.code&&"EUR"!==this.code||n.splice(0,0,n.splice(e,1)[0])}),r)&&r(n)},error:function(e){throw new Error(e)}})},e.loadPricings=function(r){$.ajax({type:"GET",url:JApp.pricing.url.getPrices(),dataType:"json",async:!0,success:function(e){if(!e.response)throw new Error("Can not get pricing models");t=e.response,r&&r(t)},error:function(e){throw new Error(e)}})},e.getDefaultHoster=function(){return s||o},e.isLoadedDefHoster=function(){return 0!==s.length},e.getHosters=function(){return i},e.isLoadedHosters=function(){return 0!==Object.keys(i).length},e.loadHosters=function(r){$.ajax({type:"GET",url:JApp.pricing.url.getHosters(),async:!0,success:function(e){if(!e.response)throw new Error("Can not get hosters");i=[],$.each(e.response,function(e){"servint"!==this.keyword&&!0===this.hasSignup&&i.push(this)}),i.sort(function(e,r){e=e.keyword.toLowerCase(),r=r.keyword.toLowerCase();return e<r?-1:r<e?1:0}),r&&r(i)}})},e.loadDefaultHoster=function(n,e){e=e||{},$.ajax({type:"POST",url:JApp.pricing.url.getUserDefHosterURL(),data:{criteria:JSON.stringify(e),hasSignup:!0},async:!1,success:function(e){e=jQuery.parseJSON(e)||{};0===e.result&&e.response&&(e=e.response),s=e.hoster,n&&n(s)},error:function(e,r,t){s=o,n&&n()}})},e})(JApp.pricing||{});
JApp.pricing=JApp.pricing||{},JApp.pricing.Calculator=function(e){var p=this;if(p.loaded=!1,p.sCurrentHoster=!1,p.oHosters=[],p.pricing={},p.currencies="",p.element=e.oElement,p.sKey=e.sKey,p.hosterCurrency="USD",p.oLanguages=[],p.startCurrency="",p.allowCurrencies=!1,p.mhz=p.element.getAttribute("data-mhz")||400,p.mib=p.element.getAttribute("data-mib")||128,p.localization={txChoose:"Choose Service Provider of Jelastic Public Cloud",txPerfomance:"Perfomance",txSupport:"Support",txLocation:"Location",txServices:"Advanced Services",balancerTxt:p.element.getAttribute("data-balancer-tx")||"Balancer",AppServerTxt:p.element.getAttribute("data-appserver-tx")||"App Server",DatabaseTxt:p.element.getAttribute("data-db-tx")||"Database",DiskTxt:p.element.getAttribute("data-disk-tx")||'Disk Space<span class="small">GB / hour</span>',DiscTooltipTxt:p.element.getAttribute("data-disk-tooltip-tx")||"Amount of disk space consumed per hour. While checking per month price, the calculator considers that you use the stated number of GB every hour during the whole period. The platform will count only consumed resources on hourly basis, so the total price can be lower.",IpTxt:p.element.getAttribute("data-ip-tx")||"Public IP",TrafficTxt:p.element.getAttribute("data-traffic-tx")||'External Traffic<span class="small">GB / hour</span>',TrafficTooltipTxt:p.element.getAttribute("data-traffic-tooltip-tx")||"Amount of external traffic consumed per hour. While checking per month price, the calculator considers that you use the stated number of GB every hour during the whole period. The platform will count only consumed resources on hourly basis, so the total price can be lower.",ReservedTxt:p.element.getAttribute("data-reserved-tx")||"Reserved",ReservedCloudletsTxt:p.element.getAttribute("data-reserved-cloudlets-tx")||"Reserved Cloudlets",ReservedDescriptionTxt:p.element.getAttribute("data-reserved-tooltip-tx")||"Reserve the cloudlets to pay a fixed price. The more you reserve, the bigger the discount is!",ScalingLimitTxt:p.element.getAttribute("data-scaling-limit-tx")||"Scaling Limit",ScalingDescriptionTxt:p.element.getAttribute("data-scaling-tooltip-tx")||"Define the maximum amount of resources for automatic vertical scaling based on load changes",totalTxt:p.element.getAttribute("data-total-tx")||"Total Cloudlets",hourlyTxt:p.element.getAttribute("data-hourly-tx")||"Per Hour",monthlyTxt:p.element.getAttribute("data-monthly-tx")||"Per Month",priceSeparator:p.element.getAttribute("data-price-separator")||".",priceMinTxt:p.element.getAttribute("data-price-min-tx")||"Starting Price",priceMaxTxt:p.element.getAttribute("data-price-max-tx")||"Maximum Price",priceMaxDescrTxt:p.element.getAttribute("data-price-max-descr-tx")||"if all resources are fully used up to Scaling Limit",balancerMin:p.element.getAttribute("data-balancer-min")||0,balancerMax:p.element.getAttribute("data-balancer-max")||128,appServerMin:p.element.getAttribute("data-appserver-min")||0,appServerMax:p.element.getAttribute("data-appserver-max")||128,databaseMin:p.element.getAttribute("data-database-min")||0,databaseMax:p.element.getAttribute("data-database-max")||128},p.loadedComponents={pricing:!1,currencies:!1,hosters:!1,defaultHoster:!1},p.fixed="",p.dynamic="",p.ip="",p.network="",p.storage="",p.period="",p.baseUrl=p.element.getAttribute("data-base-url")||window.location.protocol+"//"+window.location.host+"/",p.cloudlets={balancer:{reserved:p.element.getAttribute("data-balancer-reserved")||0,scaling:p.element.getAttribute("data-balancer-scaling")||0,nodes:p.element.getAttribute("data-balancer-nodes")||1},appserver:{reserved:p.element.getAttribute("data-appserver-reserved")||1,scaling:p.element.getAttribute("data-appserver-scaling")||64,nodes:p.element.getAttribute("data-appserver-nodes")||1},database:{reserved:p.element.getAttribute("data-database-reserved")||0,scaling:p.element.getAttribute("data-database-scaling")||0,nodes:p.element.getAttribute("data-database-nodes")||1},storage:p.element.getAttribute("data-storage")||10,ip:p.element.getAttribute("data-ip")||1,traffic:p.element.getAttribute("data-traffic")||10},p.setLoaded=function(e){p.loadedComponents[e]=!0,p.sKey?p.loadedComponents.currencies&&p.loadedComponents.defaultHoster&&p.loadedComponents.pricing&&p.renderCalculator():p.loadedComponents.currencies&&p.loadedComponents.defaultHoster&&p.loadedComponents.hosters&&p.loadedComponents.pricing&&(p.loadedComponents.defaultHoster&&!p.sCurrentHoster&&$.isArray(p.oHosters)&&(p.sCurrentHoster=p.oHosters[0].keyword),$.each(p.oHosters,function(e,t){if(t.keyword===p.sCurrentHoster)return p.sKey=t.key,!1}),p.renderHosterSelector(),p.renderCalculator())},p.setReservedCloudlets=function(e,t){p.cloudlets[t].reserved=e,p.setMinValues(t)},p.setScalingCloudlets=function(e,t){0===e?($(p.element).find("label[for*="+t+"]").removeClass("active"),$(p.element).find("label[for*="+t+"] .node-count input").val(0).change()):($(p.element).find("label[for*="+t+"]").hasClass("active")||(0===p.cloudlets[t].nodes?$(p.element).find("label[for*="+t+"] .node-count input").val(1):$(p.element).find("label[for*="+t+"] .node-count input").val(p.cloudlets[t].nodes)).change(),$(p.element).find("label[for*="+t+"]").addClass("active")),p.cloudlets[t].scaling=e,p.setMaxValues(t)},p.convertMib=function(e){return 1e3<(e*=parseInt(p.mib))?parseFloat(e/1024).toFixed(2)+" GiB":e+" MiB"},p.convertMhz=function(e){return 1e3<(e*=parseInt(p.mhz))?parseFloat(e/1e3).toFixed(2)+" GHz":e+" MHz"},p.changePricePeriod=function(e){switch(p.period){case"hourly":e=Math.round(1e3*e)/1e3;break;case"monthly":e=(730*e).toFixed(2)}return e},p.checkStoragePrice=function(){sValue=p.cloudlets.storage;var e=p.storage.tiers;if(price=e[0].price,sValue<e[0].value)return 0;for(var t=0;t<e.length;t++){if(!e[t+1])return 0<e[e.length-1].free&&sValue<=e[e.length-1].free?0:(sValue-e[e.length-1].free)*e[e.length-1].price;if(sValue>=e[t].value&&sValue<e[t+1].value)return 0<e[t].free&&sValue<=e[t].free?0:(price=e[t].price,(sValue-e[t].free)*price)}},p.checkIpPrice=function(){sValue=p.cloudlets.ip;var e=p.ip.tiers,t=e[0].price;if(sValue<e[0].value)return 0;for(var r=0;r<e.length;r++)if(e[r+1]){if(sValue>=e[r].value&&sValue<e[r+1].value)return 0<e[r].free&&sValue<=e[r].free?0:(t=e[r].price,sValue*t)}else{if(0<e[e.length-1].free&&sValue<=e[e.length-1].free)return 0;t=e[e.length-1].price}return sValue*t},p.checkTrafficPrice=function(){sValue=p.cloudlets.traffic;var e=p.network.tiers;if(different=0,sValue<e[0].value)return 0;for(var t,r=0;r<e.length;r++){if(different=sValue-e[r].value,!e[r+1])return 0<e[e.length-1].free?(t=(t=sValue-e[e.length-1].free)<0?0:t)*e[e.length-1].price:e[e.length-1].price*sValue;if(sValue>=e[r].value&&sValue<e[r+1].value)return 0<e[r].free?(t=(t=sValue-e[r].free)<0?0:t)*e[r].price:sValue*e[r].price}},p.parseLocalNum=function(e){return e.toString().replace(".",p.localization.priceSeparator)},p.setPrice=function(){var t="",r="",a=$(p.element).find(".current-switcher").val(),e=($.each(p.currencies,function(e){a===this.code&&(t=this.usd_rate),p.hosterCurrency===this.code&&(r=this.usd_rate)}),p.checkPrice("balancer")),n=p.checkPrice("appserver"),l=p.checkPrice("database"),i=p.checkMaxPrice("balancer"),s=p.checkMaxPrice("appserver"),o=p.checkMaxPrice("database"),c=p.checkStoragePrice(),d=p.checkIpPrice(),u=p.checkTrafficPrice();e=p.toCurrency(e+n+l+c+d+u,r,t),e=p.changePricePeriod(e),e=p.parseLocalNum(e),$(p.element).find(".start-price .price").html(e);n=(n=i+s+o)+c+d+u,n=p.toCurrency(n,r,t),n=p.changePricePeriod(n),n=p.parseLocalNum(n=+n<+e?e:n),$(p.element).find(".max-price .price").html(n),l=p.cloudlets.balancer.reserved*p.cloudlets.balancer.nodes,i=p.cloudlets.appserver.reserved*p.cloudlets.appserver.nodes,s=p.cloudlets.database.reserved*p.cloudlets.database.nodes,o=p.convertMib(l+i+s),c=p.convertMhz(l+i+s);$(p.element).find(".reserved-totals .gibs").html(o),$(p.element).find(".reserved-totals .ghz").html(c),$(p.element).find(".reserved-totals .balancer").html(l),$(p.element).find(".reserved-totals .appserver").html(i),$(p.element).find(".reserved-totals .database").html(s),$(p.element).find(".reserved-totals .cloudlets-total").html(l+i+s);8<=(l+""+i+s).length?$(p.element).find(".calculator-right").addClass("new-row"):$(p.element).find(".calculator-right").removeClass("new-row");d=p.cloudlets.balancer.scaling*p.cloudlets.balancer.nodes,u=p.cloudlets.appserver.scaling*p.cloudlets.appserver.nodes,e=p.cloudlets.database.scaling*p.cloudlets.database.nodes,n=p.convertMib(d+u+e),o=p.convertMhz(d+u+e);$(p.element).find(".scaling-totals .gibs").html(n),$(p.element).find(".scaling-totals .ghz").html(o),$(p.element).find(".scaling-totals .balancer").html(d),$(p.element).find(".scaling-totals .appserver").html(u),$(p.element).find(".scaling-totals .database").html(e),$(p.element).find(".scaling-totals .cloudlets-total").html(d+u+e),c=d+""+u+e,$(p.element).find(".calculator-right").hasClass("new-row")||(8<=c.length?$(p.element).find(".calculator-right").addClass("new-row"):$(p.element).find(".calculator-right").removeClass("new-row"))},p.checkPrice=function(e){var t=p.cloudlets[e].reserved*p.cloudlets[e].nodes,r=p.fixed.tiers;if(t<1)return 0;for(var a=0;a<r.length;a++){if(a===r.length-1)return t-r[r.length-1].value<=r[r.length-1].free?r[r.length-1].price*r[r.length-1].value:r[r.length-1].price*t;if(t>=r[a].value&&t<r[a+1].value)return t-r[a].value<=r[a].free?r[a].price*r[a].value:t*r[a].price}},p.checkMaxPrice=function(e){var t=p.cloudlets[e].scaling*p.cloudlets[e].nodes,r=p.cloudlets[e].reserved*p.cloudlets[e].nodes,a=p.dynamic.tiers;if(0==t)return 0;for(var n=this.checkPrice(e),l=t-r,i=0;i<a.length;i++){if(i===a.length-1)return l<=a[a.length-1].free?n:a[a.length-1].price*l+n;if(l>=a[i].value&&l<a[i+1].value)return l<=a[i].free?n:l*a[i].price+n}},p.toCurrency=function(e,t,r){return t/r*e},p.setMinValues=function(e){var t=p.cloudlets[e].reserved,r=$(p.element).find("."+e+"-range .addui-slider-handle").eq(0),a=$(p.element).find("."+e+"-range .reserved .dot"),r=r.offset().left-$(a).offset().left+$(a).outerWidth()+10,a=(0<r?$(a).html('<span class="line more" style="width:'+(r+2)+'px"></span>'):$(a).html('<span class="line less" style="width:'+Math.abs(r)+'px"></span>'),p.convertMib(t)),r=p.convertMhz(t);$(p.element).find("."+e+"-range .min-block .digits").html("<span>"+a+"</span><span>"+r+"</span>")},p.setMaxValues=function(e){var t=p.cloudlets[e].scaling,r=$(p.element).find("."+e+"-range .addui-slider-handle").eq(1),a=$(p.element).find("."+e+"-range .sl .dot"),r=r.offset().left-$(a).offset().left+$(a).outerWidth()+10,a=(0<r?$(a).html('<span class="line more" style="width:'+(r+2)+'px"></span>'):$(a).html('<span class="line less" style="width:'+Math.abs(r)+'px"></span>'),p.convertMib(t)),r=p.convertMhz(t);$(p.element).find("."+e+"-range .max-block .digits").html("<span>"+a+"</span><span>"+r+"</span>")},p.decreaseReserved=function(e){var t=e.value.split(",")[0],r=e.value.split(",")[1];t>e._settings.min&&(e.value=--t+","+r)},p.increaseReserved=function(e){var t=e.value.split(",")[0],r=e.value.split(",")[1];t<e._settings.max&&(t===r&&r++,e.value=++t+","+r)},p.decreaseScaling=function(e){var t=e.value.split(",")[0],r=e.value.split(",")[1];r>e._settings.min&&(t===r&&t--,e.value=t+","+--r)},p.increaseScaling=function(e){var t=e.value.split(",")[0],r=e.value.split(",")[1];r<e._settings.max&&(e.value=t+","+ ++r)},p.Slider=function(e,t){var e=$(e),r={},r=(e.attr("name")&&(r.name=e.attr("name")),e.attr("class")&&(r.class=e.attr("class")),e.attr("id")&&(r.id=e.attr("id")),e.attr("value")&&(r.value=e.attr("value")),e.attr("min")&&(r.min=e.attr("min")),e.attr("max")&&(r.max=e.attr("max")),e.attr("step")&&(r.step=e.attr("step")),r.storage=p.storage,r.ip=p.ip,r.fixed=p.fixed,r.dynamic=p.dynamic,r.network=p.network,r.calculator=p,t=$.extend(r,e.data(),t),new $add.SliderObj(t));return r.render(e,"replace"),r},p.onlyUnique=function(e,t,r){return r.indexOf(e)===t},p.renderHosterSelector=function(){p.loaded=!1,console.log(p.baseUrl),sHtml=new EJS({url:p.baseUrl+"j-calculator/templates/j-hoster-selector"}).render({localization:p.localization,defHoster:p.sCurrentHoster,hosters:p.oHosters});for(var e,t=0;e=p.oHosters[t];t++)p.sCurrentHoster===e.keyword&&(p.sKey=e.key,p.sCurrentHoster=e.keyword,$(p.element).attr("data-custom-signup",e.customSignUp));0<$(p.element).find(".hoster-selector").length?$(p.element).find(".hoster-selector").replaceWith(sHtml):$(p.element).append(sHtml),$(p.element).find(".hoster-selector--select").each(function(){for(var e=$(this),t=$(this).children("option").length,r=(e.addClass("select-hidden"),e.wrap('<div class="select"></div>'),e.after('<div class="select-styled"></div>'),e.next("div.select-styled")),a=(r.text(e.children("option:selected").text()),$("<ul />",{class:"select-options"}).insertAfter(r)),n=0;n<t;n++){var l="",l=(e.children("option").eq(n).text()===e.children("option:selected").text()&&(l="current-hoster"),$("<li />",{text:e.children("option").eq(n).text(),rel:e.children("option").eq(n).val(),class:l}).appendTo(a)),i=$("<span />",{class:"flags"}).appendTo(l),l=e.children("option").eq(n).attr("data-location").split(",").filter(p.onlyUnique);$.each(l,function(e,t){$("<i />",{class:"flag flag-"+t,text:t}).appendTo(i)})}var s=a.children("li");r.click(function(e){e.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),s.click(function(e){e.stopPropagation(),r.text($(this).text()).removeClass("active"),p.sCurrentHoster=this.getAttribute("rel"),p.renderHosterSelector(),p.renderCalculator(),a.hide()}),$(document).click(function(){r.removeClass("active"),a.hide()})})},p.renderCalculator=function(){var e=p.pricing[p.sKey].tariffPlans,e=(0<e.length&&$.each(e,function(){"fixed"===this.type.toLowerCase()&&(p.fixed=this),"flexible"===this.type.toLowerCase()&&(p.dynamic=this),"network"===this.type.toLowerCase()&&(p.network=this),"storage"===this.type.toLowerCase()&&(p.storage=this),"ip"===this.keyword.toLowerCase()&&(p.ip=this)}),new EJS({url:p.baseUrl+"j-calculator/templates/j-calculator"}).render({localization:p.localization,oLanguages:p.oLanguages,id:Math.round(1e8*Math.random()),currencies:p.currencies,startCurrency:p.startCurrency,period:p.period,cloudlets:p.cloudlets,allowCurrencies:p.allowCurrencies,baseUrl:p.baseUrl}));0<$(p.element).find(".calculator-wrapper").length?$(p.element).find(".calculator-wrapper").replaceWith(e):$(p.element).append(e),p.element.setAttribute("data-mode","appserver");for(var t,r=0;t=p.oHosters[r];r++)p.sKey===t.key&&(p.hosterCurrency=t.currencyCode);$(p.element).find(".current-switcher").each(function(){for(var t=$(this),e=$(this).children("option").length,r=(t.addClass("select-hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select-styled"></div>'),t.next("div.select-styled")),a=(r.html(t.children("option:selected").attr("data-sign")+" - "+t.children("option:selected").html()),$("<ul />",{class:"select-options"}).insertAfter(r)),n=0;n<e;n++){var l="",l=(t.children("option").eq(n).text()===t.children("option:selected").text()&&(l="current-currency"),$("<li />",{text:t.children("option").eq(n).html(),rel:t.children("option").eq(n).val(),class:l}).appendTo(a));$("<span />",{class:"currency-sign",text:t.children("option").eq(n).attr("data-sign")+" - "}).prependTo(l),$("<span />",{class:"currency-name",text:t.children("option").eq(n).attr("data-name")}).appendTo(l)}var i=a.children("li");r.click(function(e){e.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),i.click(function(e){a.find(".current-currency").removeClass("current-currency"),$(this).addClass("current-currency"),e.stopPropagation(),r.html($(this).html()).removeClass("active"),t.val(this.getAttribute("rel")).change(),a.hide()}),$(document).click(function(){r.removeClass("active"),a.hide()})});var a={appserver:p.Slider($(p.element).find(".appserver-range input"),""),balancer:p.Slider($(p.element).find(".balancer-range input"),""),database:p.Slider($(p.element).find(".database-range input"),"")};$(p.element).find('input[name*="mode"]').click(function(e){p.element.setAttribute("data-mode",this.value),p.setMinValues(p.element.getAttribute("data-mode")),p.setMaxValues(p.element.getAttribute("data-mode"))}),$(p.element).find('input[name*="mode"][value=appserver]').click(),$(p.element).find(".min-block-decrease").click(function(e){e.preventDefault();e=a[p.element.getAttribute("data-mode")];p.decreaseReserved(e)}),$(p.element).find(".min-block-increase").click(function(e){e.preventDefault();e=a[p.element.getAttribute("data-mode")];p.increaseReserved(e)}),$(p.element).find(".max-block-decrease").click(function(e){e.preventDefault();e=a[p.element.getAttribute("data-mode")];p.decreaseScaling(e)}),$(p.element).find(".max-block-increase").click(function(e){e.preventDefault();e=a[p.element.getAttribute("data-mode")];p.increaseScaling(e)}),$(p.element).find(".node-count input").change(function(e){var t=$(this);p.cloudlets[this.getAttribute("name")].nodes=+this.value,parseInt(t.val())>parseInt(t.attr("max"))&&t.val(t.attr("max")).change(),(parseInt(t.val())<0||""===t.val())&&t.val(0).change(),p.setPrice()}),$(p.element).find(".digit").change(function(e){var t=$(this);p.cloudlets[this.getAttribute("name")]=+this.value,parseInt(t.val())>parseInt(t.attr("max"))&&t.val(t.attr("max")).change(),(parseInt(t.val())<0||""===t.val())&&t.val(0).change(),p.setPrice()}),$(p.element).find(".plus").click(function(e){e.preventDefault();e=$(this).closest(".inner").find(".digit");e.val(parseInt(e.val())+1).change()}),$(p.element).find(".minus").click(function(e){e.preventDefault();e=$(this).closest(".inner").find(".digit");0<parseInt(e.val())&&e.val(parseInt(e.val())-1).change()}),$(p.element).find(".plus-node").click(function(e){e.preventDefault();e=$(this).closest(".node-count").find("input");e.val(parseInt(e.val())+1).change()}),$(p.element).find(".minus-node").click(function(e){e.preventDefault();e=$(this).closest(".node-count").find("input");0<parseInt(e.val())&&e.val(parseInt(e.val())-1).change()}),$(p.element).find(".calculator-right input").click(function(e){p.period=$(this).val(),p.setPrice()}),$(p.element).find(".current-switcher").change(function(e){p.setPrice()}),$(".j-calculator").removeClass("loading"),p.loaded=!0},!p.element)throw new Error("Ooops! Something was wrong!");JApp.pricing.isLoadedCurrencies()?(p.currencies=JApp.pricing.getCurrecies(),p.setLoaded("currencies")):JApp.pricing.loadCurrencies(function(e){p.currencies=e,p.setLoaded("currencies")}),p.oLanguages=p.element.getAttribute("data-languages")||["java","php","node","python","go","ruby"],Array.isArray(p.oLanguages)||(p.oLanguages=p.oLanguages.split(",").map(function(e){return e.trim()})),p.period=p.element.getAttribute("data-period")||"hourly",p.startCurrency=p.element.getAttribute("data-start-currency")||"USD",p.element.getAttribute("data-currencies")&&(p.allowCurrencies=p.element.getAttribute("data-currencies").split(",")),p.sKey?($.ajax({type:"GET",url:"https://"+p.sKey+"/auth/GetDefaultPricingModels",dataType:"json",async:!0,success:function(e){if(0!==e.result||!e.response.models[0])throw new Error("Can not get hoster pricing model");$.each(e.response.models,function(e,t){t.isDefault&&(p.pricing[p.sKey]=t)}),p.pricing[p.sKey]||(p.pricing[p.sKey]=e.response.models[0]),p.setLoaded("pricing")},error:function(e){throw new Error(e)}}),$.ajax({type:"GET",url:"https://"+p.sKey+"/settings/GetHosterSettings",dataType:"json",async:!0,success:function(e){if(0!==e.result||!e.response.settingsCurrencyCode)throw new Error("Can not get hoster default currency");p.hosterCurrency=p.element.getAttribute("data-hoster-currency")||e.response.settingsCurrencyCode,p.setLoaded("defaultHoster")},error:function(e){throw new Error(e)}})):(e=Math.round(1e8*Math.random()),JApp.pricing.isLoadedDefHoster()?(p.sCurrentHoster=JApp.pricing.getDefaultHoster(),p.setLoaded("defaultHoster")):JApp.pricing.loadDefaultHoster(function(e){e&&(p.sCurrentHoster=e),p.setLoaded("defaultHoster")},e),JApp.pricing.isLoadedHosters()?(p.oHosters=JApp.pricing.getHosters(),p.setLoaded("hosters")):JApp.pricing.loadHosters(function(e){p.oHosters=e,p.setLoaded("hosters")}),JApp.pricing.isLoadedPricing()?(p.pricing=JApp.pricing.getPricing(),p.setLoaded("pricing")):JApp.pricing.loadPricings(function(e){p.pricing=e,p.setLoaded("pricing")}))},jQuery(document).ready(function(e){var t=e(".j-calculator"),r=[];0<t.length&&e.each(t,function(e){this.classList.add("loading");var t={oElement:this};this.getAttribute("data-key")&&(t.sKey=this.getAttribute("data-key")),r[e]=new JApp.pricing.Calculator(t)}),e(window).resize(function(){e(r).each(function(){this.loaded&&(this.setMinValues(this.element.getAttribute("data-mode")),this.setMaxValues(this.element.getAttribute("data-mode")))})})});
var $add;($add=void 0===$add?{version:{},auto:{disabled:!1}}:$add).version.Slider="2.0.1",$add.SliderObj=function(s){function v(t,s){return Math.round(t*(1/s))/(1/s)}function _(t){return isNaN(parseFloat(t))&&0<t.length?_(t.substr(1)):parseFloat(t)}Obj.apply(this),this._settings={direction:"horizontal",min:0,max:100,step:.1,value:50,formatter:function(t){var s,e;s=-1<(this._settings.step+"").indexOf(".")?(this._settings.step+"").split(".").pop().length:0,_(t);if(t<0?(e=!0,t=0-t):e=!1,isNaN(t))return"NaN";var i=Math.floor(t),n=t-i,n=Math.round(n*Math.pow(10,s));for(n+="";n.length<s;)n="0"+n;return(e?"-":"")+i+(0<s?"."+n:"")},timeout:2e3,range:!1,id:!1,name:"",class:"",fixed:"",dynamic:"",calculator:""},Object.defineProperty(this,"settings",{get:function(){return this.trigger("getsetting settings",this._settings),this._settings},set:function(t){this._settings=$.extend(this._settings,s),this.trigger("setsettings settings",this._settings),this.refresh()}}),Object.defineProperty(this,"value",{get:function(){return this.trigger("getvalue value",this._settings.value),this._settings.value},set:function(t){var i,n,s,a,d,e,l=this;this._settings.value=t,this._elements.find(".addui-slider-input").val(this._settings.value),this._settings.range?(i=v(parseFloat(this._settings.value.split(",")[0]),this._settings.step),n=v(parseFloat(this._settings.value.split(",")[1]),this._settings.step),t=this._settings.max-this._settings.min,e=i-this._settings.min,s=n-this._settings.min,a=e/t*100,d=s/t*100,this._elements.each(function(t,s){var s=$(s),e=$(s.closest('[class*="-range"]'))[0].className.replace("-range",""),s=("vertical"==l._settings.direction?(s.find(".addui-slider-handle").eq(0).css("bottom",a+"%"),s.find(".addui-slider-handle").eq(1).css("bottom",d+"%"),s.find(".addui-slider-range").css("bottom",a+"%").css("height",d-a+"%")):(s.find(".addui-slider-start-distance").css("width","calc("+a+"% + 30px)"),s.find(".addui-slider-handle").eq(0).css("left",a+"%"),s.find(".addui-slider-handle").eq(1).css("left",d+"%"),s.find(".addui-slider-range").css("left",a+"%").css("width",d-a+"%"),s.find(".addui-slider-distance").css("width","calc("+(100-d)+"% + 31px)")),$(l._settings.calculator.element).attr("data-cloudlets-tx")||"cloudlets");$("."+e+"-range .reserved-cloudlets").html(toFunc(l._settings.formatter).call(l,i)+" "+s),$("."+e+"-range .scaling-cloudlets").html(toFunc(l._settings.formatter).call(l,n)+" "+s),l._settings.calculator.setReservedCloudlets(i,e),l._settings.calculator.setScalingCloudlets(n,e),l._settings.calculator.setPrice()})):(e=v(_(this._settings.value)-this._settings.min,this._settings.step)/(this._settings.max-this._settings.min)*100,"vertical"==this._settings.direction?(this._elements.find(".addui-slider-handle").css("bottom",e+"%"),this._elements.find(".addui-slider-range").css("height",e+"%"),this._elements.find(".addui-slider-range").css("bottom","0%")):(this._elements.find(".addui-slider-handle").css("left",e+"%"),this._elements.find(".addui-slider-range").css("width",e+"%")),this._elements.find(".addui-slider-value span").html(toFunc(this._settings.formatter).call(this,this._settings.value)))}}),this.renderer=function(){var s,e,i,n,a,d,l=this,o=$("<div class='addui-slider addui-slider-"+this._settings.direction+(this._settings.range?" addui-slider-isrange":"")+" "+this._settings.class+"' "+(this._settings.id?"id='"+this._settings.id+"'":"")+"></div>"),t=($("<input class='addui-slider-input' type='hidden' name='"+this._settings.name+"' value='"+this._settings.value+"' />").appendTo(o),$("<div class='addui-slider-track'></div>").appendTo(o));$("<div class='addui-slider-range'></div>").appendTo(t);function h(t){var s,e;t.preventDefault();var t=v(("vertical"==l._settings.direction?(s=("touchmove"==t.type?t.originalEvent.changedTouches[0]:t).pageY,i=o.offset().top+o.height(),e=l._settings.max-l._settings.min,(i-s)/o.height()*100):(i=("touchmove"==t.type?t.originalEvent.changedTouches[0]:t).pageX,s=o.offset().left,e=l._settings.max-l._settings.min,(i-s)/o.width()*100))/100*e+l._settings.min,l._settings.step),t=Math.min(l._settings.max,Math.max(l._settings.min,t)),i=v(_(l._settings.value.split(",")[1]),l._settings.step);l.value=t+","+(i=i<t?t:i)}function u(t){$(window).off("mousemove touchmove",h),e=setTimeout(function(){s.removeClass("addui-slider-handle-active")},l._settings.timeout)}function g(t){t.preventDefault(),s="vertical"==l._settings.direction?(s=("touchmove"==t.type?t.originalEvent.changedTouches[0]:t).pageY,(o.offset().top+o.height()-s)/o.height()*100):(("touchmove"==t.type?t.originalEvent.changedTouches[0]:t).pageX-o.offset().left)/o.width()*100;var t=l._settings.max-l._settings.min,s=v(s/100*t+l._settings.min,l._settings.step),s=Math.min(l._settings.max,Math.max(l._settings.min,s)),t=v(_(l._settings.value.split(",")[0]),l._settings.step);l.value=(t=s<t?s:t)+","+s}function r(t){$(window).off("mousemove touchmove",g),n=setTimeout(function(){i.removeClass("addui-slider-handle-active")},l._settings.timeout)}function c(t){t.preventDefault();var s=v(("vertical"==l._settings.direction?(s=("touchmove"==t.type?t.originalEvent.changedTouches[0]:t).pageY,(o.offset().top+o.height()-s)/o.height()*100):(("touchmove"==t.type?t.originalEvent.changedTouches[0]:t).pageX-o.offset().left)/o.width()*100)/100*(l._settings.max-l._settings.min),l._settings.step)+l._settings.min,s=Math.min(l._settings.max,Math.max(l._settings.min,s));l.value=v(s,l._settings.step)}function m(t){$(window).off("mousemove touchmove",c),d=setTimeout(function(){a.removeClass("addui-slider-handle-active")},l._settings.timeout)}return this._settings.range?($("<div class='addui-slider-start-distance'></div>").appendTo(t),s=$("<div class='addui-slider-handle addui-slider-handle-l'><div class='addui-slider-value'><span></span></div></div>").appendTo(t),e=null,s.on("mousedown touchstart",function(t){clearTimeout(e),s.addClass("addui-slider-handle-active"),$(window).on("mousemove touchmove dragmove",h),$(window).one("mouseup touchend",u)}),i=$("<div class='addui-slider-handle addui-slider-handle-h'><div class='addui-slider-value'><span></span></div></div>").appendTo(t),n=null,$("<div class='addui-slider-distance'></div>").appendTo(t),i.on("mousedown touchstart",function(t){clearTimeout(n),i.addClass("addui-slider-handle-active"),$(window).on("mousemove touchmove dragmove",g),$(window).one("mouseup touchend",r)})):(a=$("<div class='addui-slider-handle'><div class='addui-slider-value'><span></span></div></div>").appendTo(t),d=null,a.on("mousedown touchstart",function(t){clearTimeout(d),a.addClass("addui-slider-handle-active"),$(window).on("mousemove touchmove dragmove",c),$(window).one("mouseup touchend",m)}),o.on("click",function(t){t.preventDefault();var s=v(("vertical"==l._settings.direction?(s=("touchmove"==t.type?t.originalEvent.changedTouches[0]:t).pageY,(o.offset().top+o.height()-s)/o.height()*100):(("touchmove"==t.type?t.originalEvent.changedTouches[0]:t).pageX-o.offset().left)/o.width()*100)/100*(l._settings.max-l._settings.min),l._settings.step)+l._settings.min,s=Math.min(l._settings.max,Math.max(l._settings.min,s));clearTimeout(d),a.addClass("addui-slider-handle-active"),d=setTimeout(function(){a.removeClass("addui-slider-handle-active")},l._settings.timeout),l.value=s})),o},this.init=function(t){var s,e,i=this;this.settings=t,this._settings.range?(-1<(t=this._settings.value+"").indexOf(",")?(e=_((s=t.split(","))[0]),e=v(e=Math.min(this._settings.max,Math.max(this._settings.min,e)),this._settings.step),s=_(s[1]),s=v(s=Math.min(this._settings.max,Math.max(this._settings.min,s)),this._settings.step)):(t=v(Math.max(this._settings.min,Math.min(this._settings.max,_(this._settings.value))),this._settings.step))<(this._settings.max-this._settings.min)/2?s=this._settings.max-(e=t):e=this._settings.min+(s=t),this._settings.value=e<s?e+","+s:s+","+e):this._settings.value=Math.max(this._settings.min,Math.min(this._settings.max,_(this._settings.value))),this.on("render",function(){i.value=i._settings.value}),this.trigger("init",{settings:this._settings})},this.init.apply(this,arguments)};